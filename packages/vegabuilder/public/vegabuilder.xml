<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE visualization SYSTEM "../../visualization.dtd">
<visualization name="VegaBuilder" embeddable="true">
    <description>Natural language driven Vega builder</description>
    <data_sources>
        <data_source>
            <model_class>HistoryDatasetAssociation</model_class>
            <test test_attr="ext">csv</test>
        </data_source>
    </data_sources>
    <params>
        <param required="true">dataset_id</param>
    </params>
    <entry_point src="dist/index.js" css="dist/index.css" />
    <specs>
        <ai_api_key>unknown</ai_api_key>
        <ai_api_base_url>http://localhost:11434/v1/</ai_api_base_url>
        <ai_max_tokens>32000</ai_max_tokens>
        <ai_model>qwen3:8b</ai_model>
        <ai_prompt><![CDATA[
You are a visualization planning agent.

You must NOT generate code.
You must NOT generate Vega-Lite, JSON specifications, or prose.

You must ONLY communicate by calling the tools that are provided to you.
You always must at least call one tool.

Rules:
- Only use the provided tool schemas.
- Only use values allowed by the tool parameters.
- Do not invent shell identifiers.
- Do not invent or rename dataset fields.
- Do not explain your reasoning.

The client controls the workflow and which tools are available.
        ]]></ai_prompt>
        <ai_temperature>0.3</ai_temperature>
        <ai_top_p>0.9</ai_top_p>
        <ui>
            <chat>true</chat>
        </ui>
    </specs>
    <help format="markdown"><![CDATA[
]]></help>
</visualization>