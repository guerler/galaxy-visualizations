<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE visualization SYSTEM "../../visualization.dtd">
<visualization name="VIntent" embeddable="true">
    <description>Natural language driven Vega builder</description>
    <data_sources>
        <data_source>
            <model_class>HistoryDatasetAssociation</model_class>
            <test test_attr="ext">csv</test>
        </data_source>
    </data_sources>
    <params>
        <param required="true">dataset_id</param>
    </params>
    <entry_point src="dist/index.js" css="dist/index.css" />
    <specs>
        <ai_api_key>unknown</ai_api_key>
        <ai_api_base_url>http://localhost:11434/v1/</ai_api_base_url>
        <ai_max_tokens>32000</ai_max_tokens>
        <ai_model>qwen3:8b</ai_model>
        <ai_prompt><![CDATA[
You are a visualization planning agent.

You must NOT generate code.
You must NOT generate Vega-Lite, JSON specifications, or prose.

You must ONLY communicate by calling the tools that are provided to you.
You always must at least call one tool.

Rules:
- Only use the provided tool schemas.
- Only use values allowed by the tool parameters.
- Do not invent shell identifiers.
- Do not invent or rename dataset fields.
- Do not explain your reasoning.

The client controls the workflow and which tools are available.
        ]]></ai_prompt>
        <ai_temperature>0.3</ai_temperature>
        <ai_top_p>0.9</ai_top_p>
        <ui>
            <chat>true</chat>
        </ui>
    </specs>
    <help format="markdown"><![CDATA[
# What is VIntent

VIntent is a client side layer for building Vega Lite visualizations through an interactive, chat driven workflow. It translates user intent into structured visualization steps that result in valid Vega Lite specifications.

VIntent coordinates shell selection, parameter resolution, validation, and specification assembly, enabling users to move from a dataset to a concrete Vega Lite visualization in a controlled and iterative way.

## Core Capabilities

- **Vega Lite VIntenttion**
  Drives the construction of Vega Lite specifications using predefined visualization shells and explicit parameter rules.

- **Shell Based Specification Building**
  Selects appropriate shells, resolves required and optional fields, applies defaults, and validates inputs before compilation.

- **Interactive Refinement Loop**
  Supports stepwise refinement of encodings, aggregations, and visual structure through chat based interaction.

- **Client Side Control Flow**
  Executes entirely in the browser, keeping visualization building fast, transparent, and responsive.

## Intended Use

VIntent is designed for exploratory visualization building with Vega Lite. It emphasizes clarity of structure, correctness of specifications, and rapid iteration.

It is suited for:
- generating Vega Lite visualizations from datasets
- refining visual encodings interactively
- exploring data through structured visualization patterns

## How It Fits In

VIntent provides the logic that connects user intent to Vega Lite specifications. It sits between user interaction and rendering, forming a tight loop for building and refining visualizations in an interactive environment.
]]></help>
</visualization>